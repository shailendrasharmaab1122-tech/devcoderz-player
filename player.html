<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DevCoderz ‚Äî Plyr HLS Player</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css" />

<style>
  :root{
    --bg:#050507;
    --panel:#0d0f12;
    --neon:#00eaff;
    --accent:#8b33ff;
    --muted:#9aa4ad;
  }
  html,body{height:100%;margin:0;background:#020204;font-family:Inter, Arial, sans-serif;color:#eafcff}
  .app{display:flex;gap:18px;align-items:flex-start;padding:20px;min-height:100vh;box-sizing:border-box}
  
  .left{
    width:220px;background:rgba(255,255,255,0.02);
    border-radius:12px;padding:16px;display:flex;
    flex-direction:column;align-items:center;
    border:1px solid rgba(0,234,255,0.06);
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
    animation:bp 3s ease-in-out infinite alternate;
  }
  
  .logo{width:96px;height:96px;border-radius:999px;
        background:linear-gradient(135deg,var(--neon),var(--accent));
        display:flex;align-items:center;justify-content:center;
        font-weight:900;color:#001219;font-size:24px}
  .left h3{margin-top:12px;color:var(--neon);font-size:18px}

  @keyframes bp{from{transform:translateY(0)}to{transform:translateY(-6px)}}

  .main{flex:1;display:flex;flex-direction:column;align-items:center;gap:12px}
  
  .playerWrap{
    width:100%;max-width:1100px;position:relative;
    border-radius:12px;padding:10px;
    background:rgba(255,255,255,0.02);
    box-shadow:0 12px 40px rgba(0,0,0,0.6);
  }

  .playerWrap::before{
    content:"";position:absolute;inset:0;border-radius:12px;padding:2px;
    background:conic-gradient(from 180deg,var(--neon),var(--accent));
    -webkit-mask:linear-gradient(#000,#000) content-box,linear-gradient(#000,#000);
    -webkit-mask-composite:xor;mask-composite:exclude;
    pointer-events:none;filter:blur(12px);opacity:.9;
  }

  video.plyr__video{
    width:100%;border-radius:10px;background:#000;
    max-height:72vh;
  }

  .frameButtons{position:absolute;right:14px;top:12px;z-index:20;display:flex;gap:8px}
  .btn{background:rgba(255,255,255,0.04);border:none;color:var(--neon);
       padding:8px 10px;border-radius:8px;font-weight:700;cursor:pointer}

  .controlsRow{width:100%;max-width:1100px;display:flex;justify-content:space-between;align-items:center;padding:8px}
  .group{display:flex;gap:10px}
  .custom{padding:8px 12px;border-radius:8px;border:none;background:rgba(255,255,255,0.03);color:#eafcff;font-weight:700}

  .meta{text-align:center;color:#cfeefc;width:100%;max-width:1100px}
  .meta a{color:var(--neon);font-weight:800;text-decoration:none}

  .ram{font-size:36px;color:red;font-weight:900;text-shadow:0 0 12px red,0 0 28px red;}
  
  .popupOverlay{position:fixed;inset:0;background:rgba(0,0,0,0.92);
                display:flex;align-items:center;justify-content:center;z-index:99999}
  .popupCard{background:#0b0b0d;padding:24px;border-radius:14px;width:92%;max-width:420px;text-align:center;border:1px solid rgba(139,51,255,0.14)}

  .spinner{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
           width:50px;height:50px;border-radius:999px;border:5px solid rgba(255,255,255,0.1);
           border-top-color:var(--neon);animation:spin 1s linear infinite;display:none;z-index:50}
  @keyframes spin{to{transform:translate(-50%,-50%) rotate(360deg)}}

  @media(max-width:900px){
    .left{display:none}
    .ram{font-size:28px}
    .controlsRow{flex-direction:column;gap:10px}
  }
</style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.min.js"></script>

<div class="app">

  <aside class="left">
    <div class="logo">DC</div>
    <h3>DevCoderz</h3>
  </aside>

  <main class="main">

    <div id="popup" class="popupOverlay">
      <div class="popupCard">
        <h2 style="color:var(--neon);">üîî Lecture unlock ke liye Telegram join karein</h2>
        <p style="color:var(--muted);">Other lectures & resources ke liye Telegram join karein.</p>
        <div style="height:18px"></div>

        <a href="https://t.me/+QVhljL_D32RlOTg1"
           style="display:inline-block;padding:12px 18px;border-radius:10px;background:var(--neon);color:#001219;font-weight:900;text-decoration:none;">
           Join Telegram
        </a>

        <br><br>
        <button id="popupSkip" style="padding:10px 14px;border-radius:8px;background:#222;color:#fff;border:none;cursor:pointer">
          I Have Joined / Skip
        </button>
      </div>
    </div>

    <div class="playerWrap">
      <div class="spinner" id="spinner"></div>

      <div class="frameButtons">
        <button id="customFull" class="btn">‚õ∂</button>
        <button id="nativeFull" class="btn">‚§¢</button>
      </div>

      <video id="videoElement" class="plyr__video" playsinline controls></video>
    </div>

    <div class="controlsRow">
      <div class="group">
        <button id="btnPlay" class="custom">Play</button>
        <button id="btnPause" class="custom">Pause</button>
        <button id="btnBack" class="custom">¬´ 10s</button>
        <button id="btnFwd" class="custom">10s ¬ª</button>
        <button id="btnMute" class="custom">Mute</button>
      </div>

      <div class="group">
        <label>Quality</label>
        <select id="qualitySel" class="custom"><option>Auto</option></select>

        <label>Speed</label>
        <select id="speedSel" class="custom">
          <option value="0.25">0.25x</option>
          <option value="0.5">0.5x</option>
          <option value="0.75">0.75x</option>
          <option value="1" selected>1x</option>
          <option value="1.25">1.25x</option>
          <option value="1.5">1.5x</option>
          <option value="1.75">1.75x</option>
          <option value="2">2x</option>
          <option value="2.25">2.25x</option>
          <option value="2.5">2.5x</option>
          <option value="3">3x</option>
          <option value="3.5">3.5x</option>
          <option value="4">4x</option>
        </select>
      </div>
    </div>

    <div class="meta">
      Developer ‚Äì <b>PT. Devansh Sharma</b> ‚Ä¢  
      <a href="https://t.me/+QVhljL_D32RlOTg1">Join Telegram</a>
    </div>

    <div class="ram">‡§ú‡§Ø ‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ</div>

  </main>
</div>

<script>
let params=new URLSearchParams(location.search);
let raw=params.get("Url")||"";
try{raw=decodeURIComponent(raw)}catch(e){}
const VIDEO_URL=raw;

const video=document.getElementById("videoElement");
const spinner=document.getElementById("spinner");
const qualitySel=document.getElementById("qualitySel");
const speedSel=document.getElementById("speedSel");

const plyr=new Plyr(video,{controls:['play','progress','current-time','mute','volume','settings','fullscreen'],settings:['quality','speed']});

let hls=null;

function loadHls(url){
  if(hls){try{hls.destroy()}catch(e){}}
  if(Hls.isSupported()){
    hls=new Hls({capLevelToPlayerSize:true});
    hls.attachMedia(video);
    hls.on(Hls.Events.MEDIA_ATTACHED,()=>hls.loadSource(url));

    hls.on(Hls.Events.MANIFEST_PARSED,()=>{
      qualitySel.innerHTML="";
      let a=document.createElement("option");
      a.value=-1;a.text="Auto";qualitySel.appendChild(a);

      let levels=hls.levels;
      let used=new Set();
      levels.forEach((lv,i)=>{
        let h=lv.height||0;
        if(h>0 && !used.has(h)){
          used.add(h);
          let o=document.createElement("option");
          o.value=i;o.text=h+"p";
          qualitySel.appendChild(o);
        }
      });
    });

    hls.on(Hls.Events.LEVEL_SWITCHED,(_,d)=>{
      let opt=[...qualitySel.options].find(o=>Number(o.value)===d.level);
      if(opt)opt.selected=true;
    });

  } else {
    video.src=url;
  }
}

loadHls(VIDEO_URL);

/* popup */
document.getElementById("popupSkip").onclick=()=>{
  document.getElementById("popup").style.display="none";
};

/* custom controls */
document.getElementById("btnPlay").onclick=()=>video.play();
document.getElementById("btnPause").onclick=()=>video.pause();
document.getElementById("btnBack").onclick=()=>video.currentTime-=10;
document.getElementById("btnFwd").onclick=()=>video.currentTime+=10;
document.getElementById("btnMute").onclick=()=>{
  video.muted=!video.muted;
  document.getElementById("btnMute").textContent=video.muted?"Unmute":"Mute";
};

speedSel.onchange=()=>video.playbackRate=parseFloat(speedSel.value);

qualitySel.onchange=()=>{
  if(hls){
    let v=Number(qualitySel.value);
    hls.currentLevel=v;
  }
};

/* spinner */
video.addEventListener("waiting",()=>spinner.style.display="block");
video.addEventListener("playing",()=>spinner.style.display="none");

/* custom fullscreen */
const app=document.querySelector(".app");
const left=document.querySelector(".left");
let customFull=false;

document.getElementById("customFull").onclick=()=>{
  if(!customFull){
    app.style.position="fixed";
    app.style.top="0";
    app.style.left="0";
    app.style.width="100vw";
    app.style.height="100vh";
    app.style.zIndex="99999";
    app.style.background="#000";
    app.style.padding="0";
    app.style.overflow="hidden";

    left.style.display="flex";
    left.style.height="100vh";
    left.style.minWidth="200px";

    video.style.width="100%";
    video.style.height="100vh";
    video.style.maxHeight="100vh";
    video.style.objectFit="contain";

    customFull=true;
  } else {
    app.style.position="";
    app.style.top="";
    app.style.left="";
    app.style.width="";
    app.style.height="";
    app.style.zIndex="";
    app.style.background="";
    app.style.padding="";
    app.style.overflow="";

    left.style.display="";
    left.style.height="";
    left.style.minWidth="";

    video.style.width="";
    video.style.height="";
    video.style.maxHeight="";
    video.style.objectFit="";

    customFull=false;
  }
};

/* native fullscreen */
document.getElementById("nativeFull").onclick=async()=>{
  if(!document.fullscreenElement)
    await document.documentElement.requestFullscreen();
  else
    await document.exitFullscreen();
};
</script>

</body>
</html>