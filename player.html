<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DevCoderz Player</title>

<!-- HLS Support -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
    body {
        background: #000;
        color: white;
        font-family: Arial;
        margin: 0;
        padding: 20px;
        text-align: center;
    }

    .player-box {
        width: 90%;
        max-width: 900px;
        margin: auto;
        padding: 15px;
        border-radius: 18px;
        box-shadow: 0 0 25px #00f2ff;
        background: #111;
    }

    video {
        width: 100%;
        border-radius: 12px;
        outline: none;
    }

    .control-row {
        margin-top: 15px;
        display: flex;
        justify-content: center;
        gap: 12px;
    }

    select, button {
        padding: 10px 15px;
        font-size: 16px;
        border-radius: 8px;
        border: none;
        font-weight: bold;
    }

    #offlineStatus {
        margin-top: 15px;
        padding: 10px 15px;
        border-radius: 12px;
        display: inline-block;
        font-size: 18px;
        font-weight: bold;
        background: #444;
        color: #ccc;
    }

    .ram {
        font-size: 32px;
        margin-top: 25px;
        color: red;
        text-shadow: 0 0 20px red, 0 0 40px orange;
        font-weight: bold;
    }
</style>
</head>
<body>

<div class="player-box">

    <h2 style="margin-bottom:10px;">üî• DevCoderz Premium Player</h2>

    <video id="video" controls></video>

    <!-- Controls -->
    <div class="control-row">
        <!-- SPEED MENU -->
        <select id="speedMenu" onchange="setSpeed(this.value)">
            <option value="0.25">0.25x</option>
            <option value="0.5">0.5x</option>
            <option value="0.75">0.75x</option>
            <option value="1" selected>1x (Normal)</option>
            <option value="1.25">1.25x</option>
            <option value="1.5">1.5x</option>
            <option value="1.75">1.75x</option>
            <option value="2">2x</option>
            <option value="2.25">2.25x</option>
            <option value="2.5">2.5x</option>
            <option value="3">3x</option>
            <option value="3.5">3.5x</option>
            <option value="4">4x</option>
        </select>

        <!-- FULLSCREEN -->
        <button onclick="fullscreen()">Fullscreen</button>
    </div>

    <!-- Offline Status -->
    <div id="offlineStatus">Loading...</div>
    <br>
    <button onclick="toggleOffline()" 
        style="margin-top:10px;background:#0a84ff;color:white;">Mark / Unmark Offline</button>

    <!-- Developer Info -->
    <p style="margin-top:18px;font-size:17px;">
        Developer ‚Äì <b>PT. Devansh Sharma</b>
    </p>

    <p>
        Join Telegram:  
        <a href="https://t.me/+QVhljL_D32RlOTg1" style="color:#00eaff;">Click Here</a>
    </p>

    <!-- JAI SHREE RAM GLOW -->
    <div class="ram">‡•• ‡§ú‡§Ø ‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ ‡••</div>

</div>

<!-- SCRIPT LOGIC -->
<script>
    const video = document.getElementById("video");

    // Load URL from parameter
    const urlParams = new URLSearchParams(window.location.search);
    const fileURL = urlParams.get("Url");

    if (Hls.isSupported()) {
        const hls = new Hls();
        hls.loadSource(fileURL);
        hls.attachMedia(video);
    } else {
        video.src = fileURL;
    }

    // SPEED CHANGE
    function setSpeed(v) {
        video.playbackRate = parseFloat(v);
    }

    // FULLSCREEN
    function fullscreen() {
        if (video.requestFullscreen) video.requestFullscreen();
    }

    /* -------------------------
       OFFLINE INDICATOR (UI ONLY)
       ------------------------- */
    const videoId = "offline_" + btoa(fileURL);

    function loadStatus() {
        const saved = localStorage.getItem(videoId);
        const box = document.getElementById("offlineStatus");

        if (saved === "true") {
            box.textContent = "Available Offline";
            box.style.background = "#1d9100";
            box.style.color = "white";
            box.style.boxShadow = "0 0 10px #4cff00";
        } else {
            box.textContent = "Not Available Offline";
            box.style.background = "#444";
            box.style.color = "#ccc";
            box.style.boxShadow = "none";
        }
    }

    function toggleOffline() {
        const saved = localStorage.getItem(videoId);

        if (saved === "true")
            localStorage.setItem(videoId, "false");
        else
            localStorage.setItem(videoId, "true");

        loadStatus();
    }

    loadStatus();
</script>

</body>
</html>