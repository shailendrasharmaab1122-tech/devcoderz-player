<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DevCoderz Player</title>

<!-- Plyr CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3/dist/plyr.css" />

<style>
    body {
        margin: 0;
        background: #000;
        font-family: Arial, sans-serif;
    }
    #playerContainer {
        width: 100%;
        height: 100vh;
        position: relative;
        background: black;
    }

    .telegram-join {
        position: absolute;
        top: 12px;
        left: 12px;
        z-index: 1000;
        background: rgba(0,0,0,0.5);
        padding: 8px 14px;
        border-radius: 6px;
        color: #fff;
        font-size: 14px;
        text-decoration: none;
        border: 1px solid #ffffff30;
    }

    .telegram-join:hover {
        background: rgba(255,255,255,0.25);
    }
</style>
</head>
<body>

<div id="playerContainer">
    <a class="telegram-join" href="https://t.me/DevCoderz" target="_blank">
        ðŸ‘‰ Click here to join Telegram Channel
    </a>

    <video id="player" controls playsinline></video>
</div>

<!-- Plyr JS -->
<script src="https://cdn.jsdelivr.net/npm/plyr@3"></script>

<!-- HLS Support -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const videoURL = urlParams.get("Url");

    const video = document.getElementById('player');
    const player = new Plyr(video, {
        controls: [
            'play', 'progress', 'current-time', 'mute', 'volume',
            'settings', 'fullscreen'
        ],
        settings: ['quality', 'speed'],
    });

    if (Hls.isSupported()) {
        const hls = new Hls();
        hls.loadSource(videoURL);
        hls.attachMedia(video);

        // Quality options
        hls.on(Hls.Events.MANIFEST_PARSED, function () {
            const levels = hls.levels.map((l, i) => ({ label: l.height + "p", value: i }));
            player.config.quality = {
                default: 0,
                options: levels.map(l => l.value),
                forced: true,
                onChange: (q) => { hls.currentLevel = q; }
            };
        });

    } else {
        video.src = videoURL;
    }
</script>

</body>
</html>