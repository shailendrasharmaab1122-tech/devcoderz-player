<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DevCoderz Ultra Player</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:sans-serif}
html,body{width:100%;height:100%;background:#000;overflow:hidden}

.player{position:fixed;inset:0;background:#000;display:flex;align-items:center;justify-content:center}
video{width:100%;height:100%;object-fit:contain;cursor:pointer}

/* TOP BRAND */
.top-brand{
 position:absolute;
 top:10px;
 left:50%;
 transform:translateX(-50%);
 z-index:20;
 text-align:center;
 pointer-events:none;
 text-shadow: 0 0 10px rgba(0,0,0,0.8);
}
.top-brand .jsr{color:#ff9800;font-weight:700;font-size:14px;margin-bottom:2px}
.top-brand .dev{font-size:11px;color:#fff;opacity:.85}

/* CENTER PLAY */
.center-play{
 position:absolute;inset:0;
 display:flex;align-items:center;justify-content:center;
 z-index:5;cursor:pointer;
 background: rgba(0,0,0,0.2);
}
.center-play.hide{display:none}
.center-play span{
 width:70px;height:70px;
 background:rgba(255,255,255,.2);
 backdrop-filter:blur(8px);
 border-radius:50%;
 display:flex;align-items:center;justify-content:center;
 font-size:30px;color:#fff;
 border: 1px solid rgba(255,255,255,0.3);
}

/* CONTROLS */
.controls{
 position:absolute;bottom:0;width:100%;
 padding:15px;
 background:linear-gradient(transparent,rgba(0,0,0,0.9));
 transition: opacity 0.3s, transform 0.3s;
 z-index: 10;
}
.controls.hide{transform:translateY(10px);opacity:0;pointer-events:none}

.progress-container{
 height:20px; 
 display:flex;
 align-items:center;
 cursor:pointer;
 margin-bottom:8px;
 touch-action: none;
}
.progress{
 width:100%;
 height:6px;background:rgba(255,255,255,0.2);border-radius:10px;
 position:relative;
}
.progress-fill{height:100%;width:0;background:#2196f3;border-radius:10px}
.thumb{
 position:absolute;top:50%;
 width:16px;height:16px;background:#fff;
 border-radius:50%;
 transform:translate(-50%,-50%);
 left:0;
 box-shadow: 0 0 5px rgba(0,0,0,0.5);
}

.time{color:#fff;font-size:12px;margin-bottom:8px;font-family: monospace;}

.row{
 display:flex;align-items:center;gap:10px;
 justify-content:space-between;color:#fff
}
.btn-group{display:flex;align-items:center;gap:15px}
.btn{
 width:36px;height:36px;
 border:1.5px solid rgba(255,255,255,0.5);border-radius:50%;
 display:flex;align-items:center;justify-content:center;
 cursor:pointer;font-size:12px;
}
.btn:active{background:rgba(255,255,255,0.2)}

/* PLAY ICON */
#play::before{content:"‚ñ∂";font-size:16px;margin-left:2px}
#play.pause::before{content:"‚ùö‚ùö";margin-left:0}

select{
 background:#111;color:#fff;
 border:1px solid #444;border-radius:4px;
 font-size:11px;height:28px;padding:0 5px;
 outline:none;
}

/* TELEGRAM POPUP */
.overlay{
 position:fixed;inset:0;
 background:rgba(0,0,0,0.85);
 display:flex;align-items:center;justify-content:center;
 z-index:100
}
.box{
 width:90%;max-width:360px;
 padding:30px;
 border-radius:20px;
 text-align:center;
 background:linear-gradient(135deg,#1e3c72,#2a5298);
 box-shadow:0 10px 30px rgba(0,0,0,0.5);
 color:#fff
}
.box h2{margin-bottom:10px;font-size:22px}
.box p{opacity:.8;font-size:14px;margin-bottom:20px}
.box a,.box button{
 margin-top:12px;
 padding:12px;
 border-radius:25px;
 border:none;font-weight:700;
 display:block;width:100%;
 cursor:pointer;text-decoration:none;
 font-size:14px;
}
.join{background:#fff;color:#1e3c72}
.continue{background:rgba(255,255,255,0.1);color:#fff;border:1px solid #fff}
</style>
</head>

<body>

<div class="overlay" id="tgPopup">
 <div class="box">
  <h2>Join Telegram</h2>
  <p>Join our channel for premium updates and source codes.</p>
  <a class="join" href="https://t.me/+JXdxtVzQf-NhM2Jl" target="_blank">Join Channel</a>
  <button class="continue" id="continueBtn">Continue to Video</button>
 </div>
</div>

<div class="player" id="player">
<video id="video" playsinline></video>

<div class="top-brand">
 <div class="jsr">üö© Jai Shree Ram üö©</div>
 <div class="dev">Developed by Devansh Sharma</div>
</div>

<div class="center-play hide" id="centerPlay"><span>‚ñ∂</span></div>

<div class="controls hide" id="controls">
 <div class="progress-container" id="progressArea">
  <div class="progress">
   <div class="progress-fill" id="bar"></div>
   <div class="thumb" id="thumb"></div>
  </div>
 </div>

 <div class="row">
  <div class="time" id="time">00:00:00 / 00:00:00</div>
  <div class="btn-group">
   <div class="btn" id="back">‚ü≤10</div>
   <div class="btn" id="play"></div>
   <div class="btn" id="fwd">10‚ü≥</div>
  </div>
  
  <div class="btn-group">
   <select id="speed">
    <option value="0.5">0.5x</option>
    <option value="1" selected>Normal</option>
    <option value="1.5">1.5x</option>
    <option value="2">2x</option>
   </select>
   <select id="quality"><option value="-1">AUTO</option></select>
   <div class="btn" id="fs">‚õ∂</div>
  </div>
 </div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
const v=document.getElementById("video"),
player=document.getElementById("player"),
controls=document.getElementById("controls"),
centerPlay=document.getElementById("centerPlay"),
bar=document.getElementById("bar"),
thumb=document.getElementById("thumb"),
progressArea=document.getElementById("progressArea"),
timeEl=document.getElementById("time"),
playBtn=document.getElementById("play"),
back=document.getElementById("back"),
fwd=document.getElementById("fwd"),
speed=document.getElementById("speed"),
quality=document.getElementById("quality"),
fs=document.getElementById("fs"),
tgPopup=document.getElementById("tgPopup"),
continueBtn=document.getElementById("continueBtn");

let hls, isDragging = false;
const urlParam = new URLSearchParams(window.location.search).get("Url");

// 1. FORMAT TIME
function fmt(t){
 if(isNaN(t))return"00:00:00";
 let h=Math.floor(t/3600), m=Math.floor((t%3600)/60), s=Math.floor(t%60);
 return String(h).padStart(2,"0")+":"+String(m).padStart(2,"0")+":"+String(s).padStart(2,"0");
}

// 2. LOAD VIDEO (HLS)
if(Hls.isSupported() && urlParam){
 hls = new Hls();
 hls.loadSource(decodeURIComponent(urlParam));
 hls.attachMedia(v);
 hls.on(Hls.Events.MANIFEST_PARSED, () => {
  quality.innerHTML = '<option value="-1">AUTO</option>';
  hls.levels.forEach((l, i) => {
   let o = document.createElement("option");
   o.value = i; o.text = l.height + "p";
   quality.appendChild(o);
  });
 });
} else if(urlParam){ v.src = decodeURIComponent(urlParam); }

// 3. CONTROLS VISIBILITY
let timeout;
function showControls(){
 controls.classList.remove("hide");
 clearTimeout(timeout);
 timeout = setTimeout(() => { if(!v.paused) controls.classList.add("hide") }, 3000);
}
player.addEventListener('mousemove', showControls);
player.addEventListener('click', showControls);

// 4. PLAY / PAUSE
function togglePlay(){ v.paused ? v.play() : v.pause(); }
playBtn.onclick = togglePlay;
centerPlay.onclick = togglePlay;
v.onplay = () => { playBtn.classList.add("pause"); centerPlay.classList.add("hide"); showControls(); };
v.onpause = () => { playBtn.classList.remove("pause"); centerPlay.classList.remove("hide"); controls.classList.remove("hide"); };

// 5. PROGRESS BAR LOGIC (DRAG & CLICK)
function handleSeek(e){
 const rect = progressArea.getBoundingClientRect();
 const x = (e.clientX || e.touches[0].clientX) - rect.left;
 let pct = Math.min(Math.max(x / rect.width, 0), 1);
 bar.style.width = thumb.style.left = (pct * 100) + "%";
 return pct;
}

const startDrag = (e) => { isDragging = true; v.pause(); handleSeek(e); };
const doDrag = (e) => { if(isDragging) handleSeek(e); };
const endDrag = (e) => {
 if(isDragging){
  isDragging = false;
  v.currentTime = handleSeek(e) * v.duration;
  v.play();
 }
};

progressArea.addEventListener('mousedown', startDrag);
window.addEventListener('mousemove', doDrag);
window.addEventListener('mouseup', endDrag);

progressArea.addEventListener('touchstart', startDrag);
window.addEventListener('touchmove', doDrag);
window.addEventListener('touchend', endDrag);

v.ontimeupdate = () => {
 if(!isDragging && v.duration){
  let p = (v.currentTime / v.duration) * 100;
  bar.style.width = thumb.style.left = p + "%";
  timeEl.textContent = `${fmt(v.currentTime)} / ${fmt(v.duration)}`;
 }
};

// 6. OTHER BUTTONS
back.onclick = (e) => { e.stopPropagation(); v.currentTime -= 10; };
fwd.onclick = (e) => { e.stopPropagation(); v.currentTime += 10; };
speed.onchange = (e) => v.playbackRate = parseFloat(e.target.value);
quality.onchange = (e) => { if(hls) hls.currentLevel = parseInt(e.target.value); };
fs.onclick = () => {
 if(!document.fullscreenElement) player.requestFullscreen();
 else document.exitFullscreen();
};

continueBtn.onclick = () => { tgPopup.style.display = "none"; v.play(); };
</script>

</body>
</html>
